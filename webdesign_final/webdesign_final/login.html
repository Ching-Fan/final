<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>期末:記帳系統_登入</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="StyleSheet1.css">
</head>
<body>
    <h2>登入</h2><br>
    <div class="container , d-flex justify-content-center align-items-center">
        <form id="login" method="get" action="login.php">      
            <b>
                Email:
            </b><br>        
            <input type="email" id="email" name="email" placeholder="Your email">
            <br><br>          
            <b>
                Password:
            </b><br>       
            <input type="Password" name="Pass" id="Pass" placeholder="Password"><br><br>
            <div style="display:none" id="mailalert" class="alert alert-danger" role="alert">
                Email格式錯誤
            </div>
            <br><br>
            <a href="counting_sheet.html" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">登入</a>
            <br><br>
        </form>
    </div>

    <script>
        $(document).ready(function () {
            //E-MAIL格式檢查
            $("body").on("change", "#email", function () {
                $Emailchecking = IsEmail($("#email").val());
                if ($Emailchecking == false) {

                    $("#mailalert").show();

                    $("#email").blur(); //離開焦點

                }
                if ($Emailchecking == true) {

                    $("#mailalert").hide();

                    $("#email").blur(); //離開焦點

                }
            })
            //儲存輸入資料進localstorage
            $("body").on("change", "#email", "#Pass", function () {
                let login = {
                    'email': $('#mail').val(),
                    'Pass': $('#Pass').val(),
                };
                localStorage.setItem('login', JSON.stringify(login));               
            })



            function IsEmail(email) {
                var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!regex.test(email)) {
                    return false;
                } else {
                    return true;
                }
            }
        });
    </script>
</body>
</html>